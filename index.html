<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <title>Bars test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href='http://fonts.googleapis.com/css?family=Raleway:300' rel='stylesheet' type='text/css'>
  <style>
    *{box-sizing: border-box;}
    body{
      margin: 2%;
      background-color: #008C95;
      font-family: 'Raleway', sans-serif;
      font-weight: 300;
    }

    label{
      display: block;
      color: #fff;
      margin-bottom: 6px;
      text-transform: uppercase;
      font-size: 24px;
    }

    input{
      display: inline-block;
      padding: .5em 1em;
      border: 0;
      font-size: 100%;
      font-family: inherit;
    }

    input[type=submit]{
      background: yellow;
      cursor: pointer;
      transition: all .2s ease;
    }

    input[type=submit]:hover{
      background: rgba(255, 255, 0, .6);
    }

    form div{margin-bottom: 1em;}

    #minutes-read{
      margin-bottom: 2em;
      padding: 2% 1%;
      border-bottom: 4px solid yellow;
      text-align: center;
    }

    ol{
      display: flex;
      flex-flow: row;
      list-style: none;
      padding: 0;
      margin: 0 auto;
      text-align: center;
    }

    .bar{
      position: relative;
      display: inline-block;
      height: 10em;
      width: 1em;
      margin: 1em .1em;
      background-color: #fff;
    }
    .one{
      top: 10px;
    }
    .two{
      top: 20px;
    }

    .bar:after{
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      top: 100%;
      background-color: yellow;
      transition: top .9s ease-out;
    }

    .marked:after{
      top: 0;
    }

    .add-log{
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      padding: 0;
      border: 0;
      background: rgba(255, 255, 0, .2);
      cursor: pointer;
      transition: all .2s ease;
      box-shadow: 1px 1px 1px #aaa;
    }

    .add-log:hover{
      background: rgba(255, 255, 0, .4);
    }

    .add-log span{
      position: absolute;
      top: -3.5em;
      right: 0;
      display: block;
      text-transform: uppercase;
      color: yellow;
    }

    .add-log span:after{
      display: block;
      content: " ";
      height: 2em;
      border-right: 1px dotted yellow;
    }

    @media screen and (min-width: 600px){
      body{
        margin: 5% 10%;
      }

      ol{
        width:60%;
        max-width: 580px;
        text-align: left;
      }
    }

    </style>
</head>
<body>
  <form id="minutes-read">
    <div>
      <label>How many minutes have you read?</label>
      <input type="text" id="minutes">
      <input type="submit" value="Go">
    </div>
  </form>
  <ol>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
    <li class="bar two"></li>
    <li class="bar"></li>
    <li class="bar one"></li>
  </ol>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script>
    $(document).ready(function(){
      var goal = 900;
      var step = 20;
      var read;
      var completed;
      var bars = $('.bar');
      var i = 0;

      $('#minutes-read').submit(function(){
        i = 0;

        $(".add-log").remove();
        $(bars).removeClass('marked');
        read = $('#minutes').val();
        completed = Math.floor(read / step);

        console.log(completed)

        if (completed !== 0){
          var interval = setInterval(function(){
            $(bars[i]).addClass('marked');
            i++;
            if (i > (completed - 1)){
              clearInterval(interval);

              $(bars[i]).addClass('button').append('<button class="add-log"><span>Add</span></button>');
              $('.button').delegate('button', 'click', function(){
                alert('hello')
              });
            }
          }, 300);
        }
        return false;
      });

    });
  </script>
</body>
</html>
